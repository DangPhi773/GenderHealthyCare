@page
@model GenderHealthcareServiceManagementSystemPages.Pages.Admin.DashboardModel
@{
    ViewData["Title"] = "Dashboard";
}

<style>
    body {
        background: linear-gradient(to bottom right, #f9f3ff, #ffeaf7, #ebf0ff);
    }

    .gradient-text {
        background: linear-gradient(to right, #9333ea, #ec4899);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-weight: bold;
    }
</style>

<div class="dashboard-grid">
    <h1 class="gradient-text mb-3" style="width:fit-content;padding:5px">Tổng quan</h1>

    <!-- Các chỉ số tổng quát -->
    <div class="metric-grid">
        @foreach (var metric in Model.Metrics)
        {
            <div class="dashboard-card">
                <div class="dashboard-card-header">
                    <p class="dashboard-card-title">@metric.Title</p>
                    <span>@* Thay thế bằng biểu tượng nếu cần *@</span>
                </div>
                <div class="dashboard-card-value">@metric.Value</div>
                <p class="dashboard-card-description">@metric.Description</p>
            </div>
        }
    </div>

    <!-- Đặt lịch gần đây và phản hồi -->
    <div class="metric-grid">

        <!-- Lịch hẹn dịch vụ gần đây -->
        <div class="dashboard-card">
            <div class="dashboard-card-header">
                <h3>Đặt lịch dịch vụ gần đây</h3>
            </div>
            <div class="dashboard-card-description">Các lượt đặt lịch gần nhất cho các dịch vụ khác nhau.</div>
            <div class="dashboard-table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Mã lịch hẹn</th>
                            <th>Dịch vụ</th>
                            <th>Người dùng</th>
                            <th>Ngày</th>
                            <th class="text-right">Trạng thái</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var booking in Model.RecentBookings)
                        {
                            var statusClass = booking.Status switch
                            {
                                "Completed" => "dashboard-badge completed",
                                "Pending" => "dashboard-badge pending",
                                _ => "dashboard-badge cancelled"
                            };
                            <tr>
                                <td>@booking.Id</td>
                                <td>@booking.Service</td>
                                <td>@booking.User</td>
                                <td>@booking.Date</td>
                                <td class="text-right">
                                    <span class="@statusClass">@booking.Status</span>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Phản hồi mới nhất -->
        <div class="dashboard-card">
            <div class="dashboard-card-header">
                <h3>Phản hồi người dùng gần đây</h3>
            </div>
            <div class="dashboard-card-description">Các bình luận và đánh giá gần đây từ người dùng.</div>
            <div class="dashboard-table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Người dùng</th>
                            <th>Đánh giá</th>
                            <th>Bình luận</th>
                            <th class="text-right">Ngày</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var feedback in Model.LatestFeedback)
                        {
                            <tr>
                                <td>@feedback.User</td>
                                <td>
                                    <div>
                                        @for (int i = 0; i < feedback.Rating; i++)
                                        {
                                            <span class="dashboard-star"></span>
                                        }
                                        @for (int i = feedback.Rating; i < 5; i++)
                                        {
                                            <span class="dashboard-star gray"></span>
                                        }
                                    </div>
                                </td>
                                <td class="dashboard-truncate">@feedback.Comment</td>
                                <td class="text-right">@feedback.Date</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

@section Styles {
    <link rel="stylesheet" href="~/css/Dashboard.css?v=20250714" />
}

