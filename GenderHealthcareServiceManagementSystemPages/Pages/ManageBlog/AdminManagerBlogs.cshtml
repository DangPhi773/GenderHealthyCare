@page
@model GenderHealthcareServiceManagementSystemPages.Pages.AdminManagerBlogs.AdminManagerBlogsModel
@{
    ViewData["Title"] = "Quản lý Blog";
}

<h2>Quản lý Blog</h2>

<a asp-page="./CreateNewBlog" class="btn btn-primary mb-3">➕ Tạo bài viết mới</a>

<a asp-page="./AdminManagerBlogs"
   asp-route-ShowDeleted="@(Model.ShowDeleted ? "false" : "true")"
   class="btn btn-outline-secondary mb-3 ms-2">
    @(Model.ShowDeleted ? "📘 Các blog hiện tại" : "🗑️ Các blog đã xóa")
</a>

@if (TempData["Message"] != null)
{
    <div class="alert alert-success mt-3">@TempData["Message"]</div>
}

<table class="table table-bordered table-hover mt-3">
    <thead class="table-light">
        <tr>
            <th></th>
            <th>Tiêu đề</th>
            <th>Người chỉnh sửa lần cuối</th>
            <th>Ngày tạo</th>
            <th>Cập nhật</th>
            <th>Thao tác</th>
        </tr>
    </thead>
    <tbody>
        @for (int i = 0; i < Model.Blogs.Count; i++)
        {
            var blog = Model.Blogs[i];
            <tr>
                <td>@(i + 1)</td>
                <td>@blog.Title</td>
                <td>@blog.Author?.FullName</td>
                <td>@blog.CreatedAt?.ToString("dd/MM/yyyy")</td>
                <td>@blog.UpdatedAt?.ToString("dd/MM/yyyy")</td>
                <td class="d-flex gap-1">
                    @if (!Model.ShowDeleted)
                    {
                        <a asp-page="/ManageBlog/EditBlog" asp-route-id="@blog.BlogId" class="btn btn-sm btn-warning">✏️ Sửa</a>
                        <form method="post" asp-page-handler="Delete" asp-route-id="@blog.BlogId"
                              onsubmit="return confirm('Bạn có chắc chắn muốn xóa blog này?');">
                            <button type="submit" class="btn btn-sm btn-danger">🗑️ Xóa</button>
                        </form>
                    }
                    else
                    {
                        <span class="text-muted">Không thao tác</span>
                    }
                </td>
            </tr>
        }
    </tbody>
</table>
