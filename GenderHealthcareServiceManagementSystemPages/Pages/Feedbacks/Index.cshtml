@page
@model GenderHealthcareServiceManagementSystemPages.Pages.Feedbacks.IndexModel

@{
    ViewData["Title"] = "Index";
    var showDeleted = Request.Query["showDeleted"] == "true";
}
<style>
    body {
        background: linear-gradient(to bottom right, #f9f3ff, #ffeaf7, #ebf0ff);
    }

    .gradient-text {
        background: linear-gradient(to right, #9333ea, #ec4899);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-weight: bold;
    }

    .tab-button {
        /* padding: 10px 20px; */
        background: white;
        border: 1px solid #9333ea;
        outline:none;
        cursor: pointer;
    }
    .tab-button:hover{
        background: #9333ea;
        color:white;
    }
    .tab-button.active {
        background: linear-gradient(to right, #9333ea, #ec4899);
        color: white;
        outline:none;
        border: 1px solid transparent;
    }

    .card-all {
        position: relative;
        display: flex;
        flex-direction: column;
        min-width: 0;
        word-wrap: break-word;
        background-color: #fff;
        background-clip: border-box;
        border: 1px solid rgba(0, 0, 0, 0.125);
        border-radius: 8px;
    }

    .card-all-body {
        flex: 1 1 auto;
        padding: 1rem 1rem;
    }
</style>

<div class="col-12 d-flex justify-content-between align-items-center mb-2">
    <h1 class="gradient-text" style="width:fit-content">Nhận xét</h1>
    <div class="d-flex col-2 justify-content-between">
        <form method="get" class="mb-3 col-5">
            <input type="hidden" name="type" value="Service" />
            <button type="submit" class="btn tab-button @(Model.FeedbackType == "Service" ? "active" : "")">Dịch vụ</button>
        </form>
        <form method="get" class="d-inline col-6">
            <input type="hidden" name="type" value="Consultant" />
            <button type="submit" class="btn tab-button @(Model.FeedbackType == "Consultant" ? "active" : "")">Tư vấn viên</button>
        </form>
    </div>
</div>
<hr />
<div class="col-12 d-flex justify-content-end mb-2">
    <form method="get">
        <input type="hidden" name="type" value="@Model.FeedbackType" />
        <input type="hidden" name="showDeleted" value="@(showDeleted ? "false" : "true")" />
        <button type="submit" class="btn btn-outline-danger">
            @(showDeleted ? "Ẩn đã xoá" : "Hiển thị đã xoá")
        </button>
    </form>
</div>

@if (showDeleted)
{
    @foreach (var item in Model.FeedbackDisplays)
    {
        int full = item.Rating;
        int empty = 5 - full;
        <div class="card-all mb-3 p-3 shadow-sm">
            <div class="d-flex align-items-center mb-2">
                <div class="rounded-circle d-flex justify-content-center align-items-center me-2"
                     style="width: 40px; height: 40px; background-color: #C8B6FF; color: white;">
                    @item.ReviewerName.FirstOrDefault()
                </div>
                <div>
                    <strong>@item.ReviewerName</strong><br />
                    <small class="text-muted">@item.CreatedAt.ToString("dd-MM-yyyy")</small>
                </div>
                <div class="ms-auto text-warning">
                    @for (int i = 0; i < full; i++)
                    {
                        <i class="bi bi-star-fill"></i>
                    }
                    @for (int i = 0; i < empty; i++)
                    {
                        <i class="bi bi-star text-secondary"></i>
                    }
                </div>
            </div>
            <p class="mb-0">@item.FeedbackText</p>
        </div>
    }
}
else
{
    <partial name="_FeedbackComponent" />
}

